  <!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>选项卡</title>
	<style>
		*{
			margin: 0;
			padding: 0;
		}
		.leftBtn,.rightBtn{
			width: 30px;
			height: 30px;
			line-height: 30px;
			text-align: center;
			color: #fff;
			background: rgba(0,0,0,0.5);
			position: absolute;
			top: 50%;
			margin-top: -15px;
			cursor: pointer;
			font-size: 20px;
		}
		.leftBtn{
			left: 0;
		}
		.rightBtn{
			right: 0;
		}
		.bottomBtn{
			position: absolute;
			bottom: 10px;
			left: 50%;
		}
		.bottomBtn li{
			float: left;
			width: 10px;
			height: 10px;
			border-radius: 50%;
			border: 1px solid #000;
			margin-right: 10px;
			cursor: pointer;
			list-style: none;
		}
		.bottomBtn li.active{
			background: rgba(255,0,255);
		}
	</style>

</head>
<body>	
	<div id="div1"></div>	
</body>
<script>
	function king(option){
		this.oDiv=document.getElementById(option.id);
		this.aImg=option.aImg;
		this.oImgUl = null;
		this.oBotUl = null;
		this.oLeftBtn = null;
		this.oRightBtn = null;
		this.width=option.width;
		this.height=option.height;
		this.interval=option.interval;
		this.init();
		this.now=0;
		this.bindEvent();
		if (this.interval) {
			this.animationEff();
		}
		
	}
	king.prototype.init=function(){
		this.oDiv.style.width=this.width+'px';
		this.oDiv.style.height=this.height+'px';
		this.oDiv.style.position='relative';
		this.oImgUl=document.createElement('ul');
		this.oDiv.appendChild(this.oImgUl);
		for (var i = 0; i < this.aImg.length; i++) {
			var oLi1=document.createElement('li');
			var oImg=document.createElement('img');

			oLi1.style.position='absolute';
			oLi1.style.left=0;
			oLi1.style.top=0;
			if(i==0){
				oLi1.style.opacity=1;
				oLi1.style.zIndex=999;
			}else{
				oLi1.style.opacity=0.5;
				oLi1.style.zIndex=1;
			}


			oImg.style.width=this.width+'px';
			oImg.style.height=this.height+'px';
			oImg.src=this.aImg[i];
			oLi1.appendChild(oImg);
			this.oImgUl.appendChild(oLi1);
			
		}
		this.oLeftBtn=document.createElement('div');
		this.oRightBtn=document.createElement('div');

		this.oLeftBtn.className='leftBtn';
		this.oRightBtn.className='rightBtn';
		this.oLeftBtn.innerHTML='&lt;';
		this.oRightBtn.innerHTML='&gt;';
		this.oLeftBtn.style.zIndex=this.oRightBtn.style.zIndex=999;
		this.oDiv.appendChild(this.oLeftBtn);
		this.oDiv.appendChild(this.oRightBtn);

		this.oBotUl=document.createElement('ul');
		this.oBotUl.style.zIndex=999;
		this.oBotUl.className='bottomBtn';
		for (var i = 0; i < this.aImg.length; i++) {
			var oLi2=document.createElement('li');
			if(i==0){
				oLi2.className='active';
			}
			this.oBotUl.appendChild(oLi2);
		}
		this.oDiv.appendChild(this.oBotUl);
		this.oBotUl.style.marginLeft=-this.oBotUl.offsetWidth*0.5+'px';	
	}
	king.prototype.bindEvent=function(){
		
		this.oLeftBtn.onclick=function(){
			this.now--;
			if (this.now<0) {
				this.now=this.oImgUl.children.length-1;
			}
			this.tab();
		}.bind(this);
		this.oRightBtn.onclick=function(){
			this.now++;

			if (this.now>=this.oImgUl.children.length) {
				this.now=0;
			}
			this.tab();
		}.bind(this);
		for (var i = 0; i < this.oImgUl.children.length; i++) {
			this.oBotUl.children[i].index=i;
			var _self=this;
			this.oBotUl.children[i].onclick=function(){
				_self.now=this.index;
				_self.tab();
			}
		}
	}
	king.prototype.tab = function(){
		for (var i = 0; i < this.oImgUl.children.length; i++) {
				this.oImgUl.children[i].style.opacity=0.5;
				this.oImgUl.children[i].style.zIndex=1;
				this.oBotUl.children[i].className='';
			}
		// this.oImgUl.children[this.now].style.opacity=1;
		animation(this.oImgUl.children[this.now],{opacity:100});
		this.oImgUl.children[this.now].style.zIndex=999;
		this.oBotUl.children[this.now].className='active';
	}
	king.prototype.animationEff=function(){
		var timer;
		
		timer=setInterval(this.oRightBtn.onclick,this.interval);
		
		this.oDiv.onmouseover=function(){
			clearInterval(timer);
		}
		this.oDiv.onmouseout=function(){
			timer=setInterval(this.oRightBtn.onclick,this.interval);
		}.bind(this);
	}

	new king({
		id:'div1',
		aImg:[
			'images/p_b_0001.jpg','images/p_b_0002.jpg','images/p_b_0003.jpg'
		],
		width:800,
		height:600,
		interval:2000,
	});
	
</script>
<script src="js/animation.js"></script>
</html>